(()=>{"use strict";var e={56:(e,t,o)=>{e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function o(e){for(var o=-1,r=0;r<t.length;r++)if(t[r].identifier===e){o=r;break}return o}function r(e,r){for(var d={},n=[],i=0;i<e.length;i++){var l=e[i],c=r.base?l[0]+r.base:l[0],s=d[c]||0,m="".concat(c," ").concat(s);d[c]=s+1;var p=o(m),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var u=a(h,r);r.byIndex=i,t.splice(i,0,{identifier:m,updater:u,references:1})}n.push(m)}return n}function a(e,t){var o=t.domAPI(t);return o.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,a){var d=r(e=e||[],a=a||{});return function(e){e=e||[];for(var n=0;n<d.length;n++){var i=o(d[n]);t[i].references--}for(var l=r(e,a),c=0;c<d.length;c++){var s=o(d[c]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}d=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o="",r=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),r&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),r&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o}).join("")},t.i=function(e,o,r,a,d){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(n[l]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&n[s[0]]||(void 0!==d&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=d),o&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=o):s[2]=o),a&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=a):s[4]="".concat(a)),t.push(s))}},t}},378:(e,t,o)=>{o.d(t,{A:()=>i});var r=o(601),a=o.n(r),d=o(314),n=o.n(d)()(a());n.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const i=n},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},541:(e,t,o)=>{o.d(t,{A:()=>i});var r=o(601),a=o.n(r),d=o(314),n=o.n(d)()(a());n.push([e.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const i=n},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,o){var r=function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(o)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var r="";o.supports&&(r+="@supports (".concat(o.supports,") {")),o.media&&(r+="@media ".concat(o.media," {"));var a=void 0!==o.layer;a&&(r+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),r+=o.css,a&&(r+="}"),o.media&&(r+="}"),o.supports&&(r+="}");var d=o.sourceMap;d&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(d))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var d=t[r]={id:r,exports:{}};return e[r](d,d.exports,o),d.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.nc=void 0;var r=o(72),a=o.n(r),d=o(825),n=o.n(d),i=o(659),l=o.n(i),c=o(56),s=o.n(c),m=o(540),p=o.n(m),h=o(113),u=o.n(h),g=o(378),f={};f.styleTagTransform=u(),f.setAttributes=s(),f.insert=l().bind(null,"head"),f.domAPI=n(),f.insertStyleElement=p(),a()(g.A,f),g.A&&g.A.locals&&g.A.locals;var y=o(541),v={};v.styleTagTransform=u(),v.setAttributes=s(),v.insert=l().bind(null,"head"),v.domAPI=n(),v.insertStyleElement=p(),a()(y.A,v),y.A&&y.A.locals&&y.A.locals;const w=document.getElementById("gameCanvas"),b=w.getContext("2d"),x=document.getElementById("startScreen"),k=document.getElementById("startButton"),I=document.getElementById("gameOver"),M=document.getElementById("scoreDisplay"),S=document.getElementById("restartButton"),Y=w.height/2,A={doodler:{x:w.width/2-25,y:w.height-100,width:40,height:50,velocityY:0,velocityX:0,jumpStrength:-15,gravity:.5,facingRight:!0},platforms:[],cameraY:0,score:0,speedMultiplier:1,gameOver:!1,gameStarted:!1,lastTime:performance.now()};function E(){if(b.clearRect(0,0,w.width,w.height),_.background.complete&&A.gameStarted){const e=_.background.height,t=-A.cameraY%e;b.drawImage(_.background,0,t,w.width,e),t>-e&&b.drawImage(_.background,0,t-e,w.width,e)}if(!A.gameStarted)return;A.platforms.forEach(e=>{if(!e.broken){let t;switch(e.type){case"normal":t=_.platform;break;case"moving":t=_.movingPlatform;break;case"breakable":t=_.breakablePlatform;break;case"spring":t=_.springPlatform}b.drawImage(t,e.x,e.y-A.cameraY,e.width,e.height)}}),b.save();const e=A.doodler.width/2;A.doodler.x<-e?A.doodler.x+=w.width:A.doodler.x+A.doodler.width>w.width+e&&(A.doodler.x-=w.width),A.doodler.facingRight?(b.drawImage(_.doodler,A.doodler.x,A.doodler.y-A.cameraY,A.doodler.width,A.doodler.height),A.doodler.x<0?(b.restore(),b.save(),b.drawImage(_.doodler,A.doodler.x+w.width,A.doodler.y-A.cameraY,A.doodler.width,A.doodler.height)):A.doodler.x+A.doodler.width>w.width&&(b.restore(),b.save(),b.drawImage(_.doodler,A.doodler.x-w.width,A.doodler.y-A.cameraY,A.doodler.width,A.doodler.height))):(b.translate(A.doodler.x+A.doodler.width,0),b.scale(-1,1),b.drawImage(_.doodler,0,A.doodler.y-A.cameraY,A.doodler.width,A.doodler.height),A.doodler.x<0?(b.restore(),b.save(),b.translate(A.doodler.x+A.doodler.width+w.width,0),b.scale(-1,1),b.drawImage(_.doodler,0,A.doodler.y-A.cameraY,A.doodler.width,A.doodler.height)):A.doodler.x+A.doodler.width>w.width&&(b.restore(),b.save(),b.translate(A.doodler.x+A.doodler.width-w.width,0),b.scale(-1,1),b.drawImage(_.doodler,0,A.doodler.y-A.cameraY,A.doodler.width,A.doodler.height))),b.restore(),b.fillStyle="black",b.font="20px Arial",b.fillText(`Score: ${A.score}`,10,20)}function T(){const e=Math.random();return e<.5?"normal":e<.7?"moving":e<.9?"breakable":"spring"}function X(){A.doodler.x=w.width/2-25,A.doodler.y=w.height-100,A.doodler.velocityY=0,A.doodler.velocityX=0,A.doodler.facingRight=!0,A.cameraY=0,A.score=0,A.speedMultiplier=1,A.gameOver=!1,A.gameStarted=!0,I.style.display="none",function(){A.platforms.length=0,A.platforms.push({x:160,y:w.height-50,width:80,height:20,type:"normal"});for(let e=1;e<6;e++){const t=A.platforms[e-1],o=Math.random()*(w.width-80),r=t.y-(50+100*Math.random()),a=T();A.platforms.push({x:o,y:r,width:80,height:20,type:a,velocityX:"moving"===a?2*A.speedMultiplier:0,broken:!1})}}(),A.lastTime=performance.now(),C(performance.now())}function C(e){if(!A.gameOver&&A.gameStarted){const t=(e-A.lastTime)/1e3;A.lastTime=e,function(e){A.speedMultiplier=Math.min(1+Math.abs(A.score)/1e4,2),A.doodler.velocityY+=A.doodler.gravity*A.speedMultiplier*e*60,A.doodler.y+=A.doodler.velocityY*e*60,A.doodler.x+=A.doodler.velocityX*e*60;const t=A.doodler.y-A.cameraY;if(Math.abs(t-Y)>10){const t=A.doodler.y-Y;A.cameraY+=.1*(t-A.cameraY)*e*60}A.score=-1*Math.floor(A.cameraY/10),A.platforms.forEach(t=>{"moving"===t.type&&(t.x+=t.velocityX*e*60,t.velocityX=2*(t.velocityX>=0?1:-1)*A.speedMultiplier,(t.x<0||t.x+t.width>w.width)&&(t.velocityX=-t.velocityX))});let o=[];A.platforms.forEach((e,t)=>{A.doodler.x<e.x+e.width&&A.doodler.x+A.doodler.width>e.x&&A.doodler.y+A.doodler.height>e.y&&A.doodler.y+A.doodler.height<e.y+e.height&&A.doodler.velocityY>0&&!e.broken&&("spring"===e.type?A.doodler.velocityY=1.5*A.doodler.jumpStrength*A.speedMultiplier:A.doodler.velocityY=A.doodler.jumpStrength*A.speedMultiplier,"breakable"===e.type&&(e.broken=!0,o.push(t)))}),A.platforms=A.platforms.filter((e,t)=>!o.includes(t));const r=A.platforms.reduce((e,t)=>t.y<e.y?t:e,A.platforms[0]);if(r.y>A.cameraY-150){const e=Math.random()*(w.width-80),t=r.y-(50+100*Math.random()),o=T();A.platforms.push({x:e,y:t,width:80,height:20,type:o,velocityX:"moving"===o?2*A.speedMultiplier:0,broken:!1}),A.platforms=A.platforms.filter(e=>e.y<A.cameraY+w.height+100)}A.doodler.y>A.cameraY+w.height&&(A.gameOver=!0,A.gameStarted=!1,I.style.display="block",M.textContent=`Score: ${A.score}`)}(t),E(),requestAnimationFrame(C)}}const O=new Image;O.src="../img/doodler.png";const P=new Image;P.src="../img/platform.png";const R=new Image;R.src="../img/moving_platform.png";const j=new Image;j.src="../img/breakable_platform.png";const L=new Image;L.src="../img/spring_platform.png";const B=new Image;B.src="../img/background.png";const _={doodler:O,platform:P,movingPlatform:R,breakablePlatform:j,springPlatform:L,background:B};!function(e){let t=0;const o=Object.keys(_).length;for(const r of Object.values(_))r.complete?(t++,t===o&&e()):r.onload=()=>{t++,t===o&&e()}}(function(){x.style.display="block",E(),document.addEventListener("keydown",e=>{A.gameStarted&&("ArrowLeft"===e.code&&(A.doodler.velocityX=-5,A.doodler.facingRight=!1),"ArrowRight"===e.code&&(A.doodler.velocityX=5,A.doodler.facingRight=!0))}),document.addEventListener("keyup",e=>{A.gameStarted&&("ArrowLeft"!==e.code&&"ArrowRight"!==e.code||(A.doodler.velocityX=0))}),k.addEventListener("click",()=>{x.style.display="none",A.gameStarted=!0,X()}),S.addEventListener("click",X)})})();